<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans+Semi+Expanded:wght@400;700&family=Montserrat:wght@200;700&display=swap" rel="stylesheet">
    <title>Stars</title>
    <script src="extra/highlight.pack.js" type="text/javascript"></script>
	  <script src="stuquery.js"></script>
    <script src="starsData.mjs" type="text/javascript"></script>
	  <script src="virtualsky.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="root"></div>
    <div class="content gradient__bg">
      <form id="formContainer">
        <div class="name">
          <label for="name">Name: </label>
          <div>
            <input type="text" name="name" id="name" required>
          </div>
        </div>

        <div class="email">
          <label for="email">Email: </label>
          <div>
            <input type="email" name="email" id="email" required>
          </div>
        </div>

        <div class="email">
          <label for="email">Your Email: </label>
          <div>
            <input type="email" name="email" id="email" required>
          </div>
        </div>

        <div id="options">
          <div class="h1">Options</div>
          <div id="optionsWrapper">
            <div class="card">
              <img src="icon1.png" alt="icon1" />
              <div class="h2">Silvernova</div>

            </div>
            <div class="card">
              <img src="icon2.png" alt="icon1" />
              <div class="h2">Supernova</div>

            </div>
            <div class="card">
              <img src="icon3.png" alt="icon1"/>
              <div class="h2">Duonova</div>

            </div>
          </div>
        </div>



        <div class="submit">
          <input type="submit" id="submit" value="Send">
        </div>
      </form>

      <div class="search">
        <input class="searchInput"></input>
        <button id="search">Search</button>
    </div>
      <div id="cards"></div>
      <div id="starmap-splash" class="planetarium"></div>

      <script>
      S(document).ready(function() {
        var vs = S.virtualsky({
          id:'starmap-splash',
          projection:'gnomic',
          ra: 83.8220833,
          dec: -5.3911111,
          gridlines_az:true,
          constellations:true,
          gradient:true,
          cardinalpoints:true,
          fontsize: '18px',
          // fontfamily: 'Manrope',
          az:90,
          showstarlabels:true,
          scalestars:1.7,
          allowTransparency:true,
          constellationlabels:true});

          S('button#search').on('click',function(){
                console.log(S('input.searchInput')[0].value)

                let value = S('input.searchInput')[0].value

                value = Number(value);
                console.log('value: ', value);
                vs.panTo(value);
          });

          // let cards = [];
          let selectedType;

          S('div.card').on('click', function(event) {
            event.preventDefault();
            event.stopPropagation();

            console.log('clicked option: ', event)

            if (event.currentTarget.outerText === 'Silvernova') {
              selectedType = 'standard'
            } else {
              selectedType = 'bright'
            }

          })



          S('input#submit').on('click', function(event) {
            event.preventDefault();
            event.stopPropagation();


            // star type code here

            console.log('selected type: ', selectedType);
            console.log('burasi: ',vs.pickStar(selectedType));
            let star = vs.pickStar(selectedType);
            console.log('picked star: ', star);



            vs.addPointer({
                ra:star.ra,
                dec:star.dec,
                label:S('input#name')[0].value,
                // img:'https://www.nicepng.com/maxp/u2w7o0a9y3w7e6q8/',
                // url: 'https://www.reddit.com/',
                html: 'html5',
                colour:'#fff',
                // height: '100px',
                uniqueId: star.uniqueId,
                // style: "border-radius:50px;"
            })

            console.log('random star: ', star);
            star.label = S('input#name')[0].value;


            addStar({
              star_name: S('input#name')[0].value,
              recipient: S('input#email')[0].value,
              sender: S('input#email')[1].value,
              star_type: S(),
              uniqueId: star.uniqueId,
            });

            console.log('get stars: ', getStars());



            // clear the form
            S('input#name')[0].value = "";
            S('input#email')[0].value = "";
            S('input#email')[1].value = "";
          })
        console.log('vs: ', vs);
      });
      </script>
    </div>

    <!-- <div id="root2"></div> -->

    <script language="javascript" type="text/javascript" src="formatexamples.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- <script type="module" src="back/db.js"></script> -->
    <script type="text/javascript" src="main.js"></script>
  </body>
</html>
